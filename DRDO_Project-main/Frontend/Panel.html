<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Project Dashboard</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    body {
  font-family: 'Segoe UI', sans-serif;
  margin: 0;
  background: #f4f9fb;
}

.top-bar {
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  background-color: #fff;
  padding: 20px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.top-bar h1 {
  margin: 0;
  font-size: 28px;
  flex-grow: 1;
  text-align: center;
  color: #333;
}

.pdf-button {
  position: absolute;
  right: 20px;
  top: 20px;
  padding: 10px 16px;
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  transition: background-color 0.3s ease;
}

.pdf-button:hover {
  background-color: #0056b3;
}

.edit-button {
  padding: 8px 16px;
  background-color: #28a745;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  float: right;
  margin-top: -40px;
  margin-right: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  transition: background-color 0.3s ease;
}

.edit-button:hover {
  background-color: #218838;
}



.container {
  display: flex;
  height: 100vh;
}

.sidebar {
  width: 250px;
  background: #111;
  color: white;
  padding: 20px;
  box-shadow: 4px 0 10px rgba(0, 0, 0, 0.2);
}

.sidebar h2 {
  font-size: 20px;
  margin-bottom: 20px;
}

.sidebar ul {
  list-style: none;
  padding: 0;
}

.sidebar li {
  padding: 12px 10px;
  margin-bottom: 10px;
  border-radius: 8px;
  cursor: pointer;
  background: #333;
  transition: 0.2s;
}

.sidebar li:hover,
.sidebar li.active {
  background: #007bff;
  color: white;
}
.label {
  font-weight: bold;
  display: inline-block;
  width: 200px;
}
.value {
  margin: 10px 0;
}
.value ul {
  margin: 5px 0 5px 210px;
  padding-left: 0;
}

.content {
  flex: 1;
  padding: 40px;
  overflow-y: auto;
}

.section {
  display: none;
  animation: fadeIn 0.3s ease-in-out;
}

.section.active {
  display: block;
}

label {
  display: block;
  margin: 15px 0;
}

input[type="text"],
input[type="number"],
input[type="date"],
textarea {
  width: 100%;
  padding: 10px;
  margin-top: 5px;
  border: 1px solid #ccc;
  border-radius: 8px;
}

input[type="file"] {
  margin-top: 10px;
}

textarea {
  height: 100px;
  resize: vertical;
}

.cost-breakdown li {
  margin: 10px 0;
  display: flex;
  gap: 10px;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
.panel-card {
  background: #f9fdff;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
  max-width: 700px;
  margin: auto;
}

.panel-card h2 {
  text-align: center;
  margin-bottom: 30px;
  font-size: 24px;
  color: #222;
}

.upload-group {
  margin-bottom: 25px;
}

.upload-group label {
  font-weight: 600;
  margin-bottom: 8px;
  display: block;
  color: #333;
}

.upload-group input[type="file"] {
  padding: 6px;
  font-size: 15px;
}

.upload-group textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 10px;
  font-size: 15px;
  resize: vertical;
}

.filename {
  font-size: 14px;
  color: #555;
  margin-top: 5px;
}

.revised-upload {
  margin-top: 10px;
  display: none;
}
.file-preview {
  margin-top: 6px;
  display: flex;
  align-items: center;
  font-size: 14px;
  color: #2c3e50;
  gap: 8px;
}

.file-preview i {
  color: #007bff;
}
.submit-btn, .edit-btn {
  margin-left: 10px;
  padding: 4px 10px;
  background-color: #3498db;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.submit-btn:hover, .edit-btn:hover {
  background-color: #2980b9;
}

.file-info, .file-history {
  margin-top: 8px;
  font-size: 14px;
  color: #2c3e50;
}

.history-item {
  margin-left: 10px;
  font-style: italic;
  font-size: 13px;
  color: #555;
}

.submitted-file {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
/* ===== Styling Specific to Section 3 ===== */
#section-3 {
  background: #ffffff;
  border-radius: 12px;
  padding: 30px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  margin-bottom: 40px;
}

#section-3 h2 {
  text-align: center;
  color: #1a202c;
  font-size: 24px;
  margin-bottom: 25px;
}

#section-3 label {
  font-weight: 600;
  color: #333;
}

#section-3 .cost-breakdown li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
  gap: 10px;
}

#section-3 .investment-block {
  background-color: #f2faff;
  border: 1px solid #d2e9f8;
  padding: 15px;
  border-radius: 10px;
  margin-bottom: 15px;
}

#section-3 .investment-block input[type="text"],
#section-3 .investment-block input[type="number"] {
  width: calc(50% - 10px);
}

#section-3 .upload-group {
  margin-top: 15px;
  margin-bottom: 15px;
}

#section-3 .upload-group label {
  font-weight: 500;
  margin-bottom: 6px;
}

#section-3 .upload-group input[type="file"] {
  background: #f0f0f0;
  border-radius: 6px;
  padding: 6px;
  font-size: 14px;
}

#section-3 button {
  margin-top: 10px;
  margin-right: 10px;
  background-color: #007bff;
  color: white;
  padding: 8px 14px;
  font-size: 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

#section-3 button:hover {
  background-color: #0056b3;
}

#section-3 .box {
  background: #ffffff;
  border: 1px solid #e1e1e1;
  border-radius: 12px;
  padding: 25px 30px;
  margin-bottom: 30px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

#section-3 .box h3 {
  margin-bottom: 20px;
  font-size: 20px;
  color: #007bff;
  border-bottom: 1px solid #dcdcdc;
  padding-bottom: 10px;
}

#section-3 .box input[type="number"],
#section-3 .box input[type="file"] {
  margin-bottom: 15px;
}

#section-3 .investment-block {
  margin-bottom: 25px;
  padding: 15px;
  border: 1px solid #d6e8ff;
  border-radius: 10px;
  background-color: #f0f8ff;
}


  </style>
</head>
<body>

    <div id="navbar-container"></div>

<div class="top-bar">
  <h1>Project Dashboard</h1>
  <button onclick="downloadPDF()" class="pdf-button">Download PDF</button>
</div>

  <div class="container">
    <aside class="sidebar">
      <h2>Project Flow</h2>
      <ul>
        <li class="active" onclick="showSection(1)">1. Project Details</li>
        <li onclick="showSection(2)">2. Managerial Panel</li>
        <li onclick="showSection(3)">3. Cost Evaluation</li>
        <li onclick="showSection(4)">4. Closure Info</li>
      </ul>
    </aside>

    <main class="content">
      <!-- Section 1 -->
    <section id="section-1" class="section active">
  <h2>Project Details</h2>

  <!-- View Mode -->
  <div id="projectView">
    <div class="value"><span class="label">Project Name:</span> <span id="viewName">Mars Terrain Analysis</span></div>
    <div class="value"><span class="label">Project ID:</span> <span id="viewID">MTA-ISRO-2025</span></div>
    <div class="value"><span class="label">Client:</span> <span id="viewClient">ISRO - Space Applications Centre</span></div>
    <div class="value"><span class="label">Start Date:</span> <span id="viewStart">2025-07-10</span></div>
    <div class="value"><span class="label">End Date:</span> <span id="viewEnd">2026-01-20</span></div>
    <div class="value"><span class="label">Estimated Duration:</span> <span id="viewDuration">6.5 months</span></div>
    <div class="value"><span class="label">Status:</span> <span id="viewStatus">Ongoing</span></div>
    <div class="value"><span class="label">Project Manager:</span> <span id="viewManager">Dr. Ananya Bhatia</span></div>
    <div class="value"><span class="label">Budget:</span> <span id="viewBudget">₹48,00,000</span></div>
    <div class="value"><span class="label">Location:</span> <span id="viewLocation">Bengaluru, India</span></div>
    <div class="value"><span class="label">Department:</span> <span id="viewDept">Planetary Sciences</span></div>
    <div class="value"><span class="label">Description:</span> <span id="viewDesc">The project aims to collect and analyze surface data from Mars...</span></div>
    <button class="edit-button" onclick="toggleEditMode()">Edit</button>


  <!-- Edit Mode -->
  <div id="projectEdit" style="display: none;">
    <label>Project Name: <input type="text" id="editName" value="Mars Terrain Analysis"></label>
    <label>Project ID: <input type="text" id="editID" value="MTA-ISRO-2025"></label>
    <label>Client: <input type="text" id="editClient" value="ISRO - Space Applications Centre"></label>
    <label>Start Date: <input type="date" id="editStart" value="2025-07-10"></label>
    <label>End Date: <input type="date" id="editEnd" value="2026-01-20"></label>
    <label>Estimated Duration: <input type="text" id="editDuration" value="6.5 months"></label>
    <label>Status: <input type="text" id="editStatus" value="Ongoing"></label>
    <label>Project Manager: <input type="text" id="editManager" value="Dr. Ananya Bhatia"></label>
    <label>Budget: <input type="text" id="editBudget" value="₹48,00,000"></label>
    <label>Location: <input type="text" id="editLocation" value="Bengaluru, India"></label>
    <label>Department: <input type="text" id="editDept" value="Planetary Sciences"></label>
    <label>Description: <textarea id="editDesc">The project aims to collect and analyze surface data from Mars...</textarea></label>
    <button onclick="saveProject()">Save</button>
  </div>
</section>



      <!-- Section 2 -->
<section id="section-2" class="section">
  <div class="panel-card">
    <h2>Managerial Panel</h2>

    <!-- PPT Upload Block -->
    <div class="upload-group" id="pptSection">
      <label>Upload PPT:</label>
      <input type="file" id="pptInput" accept=".ppt,.pptx">
      <button onclick="submitFile('ppt')" class="submit-btn">Submit</button>
      <div id="pptDisplay" class="file-info"></div>
      <div id="pptHistory" class="file-history"></div>
    </div>

    <!-- MoM Upload Block -->
    <div class="upload-group" id="momSection">
      <label>Upload MoM:</label>
      <input type="file" id="momInput" accept=".pdf,.doc,.docx">
      <button onclick="submitFile('mom')" class="submit-btn">Submit</button>
      <div id="momDisplay" class="file-info"></div>
      <div id="momHistory" class="file-history"></div>
    </div>

    <!-- Remarks -->
    <div class="upload-group">
      <label>Remarks / Meeting Summary:</label>
      <textarea placeholder="Enter remarks or summary..."></textarea>
    </div>
  </div>
</section>



      <!-- Section 3 -->
   <section id="section-3" class="section active">
  <h2>Section 3: Cost Evaluation & Investment Tracking</h2>

  <!-- Box 1: Estimated Cost -->
  <div class="box" id="estimated-cost-box">
    <h3>Estimated Cost</h3>
    <label for="estimated-cost">Total Estimated Cost (INR):</label>
    <input type="number" id="estimated-cost" placeholder="₹">
  </div>

  <!-- Box 2: Cost Breakdown -->
  <div class="box" id="cost-breakdown-box">
    <h3>Cost Breakdown</h3>
    <ul class="cost-breakdown">
      <li>
        <label>Personnel</label>
        <input type="number" placeholder="₹" id="personnel-cost">
      </li>
      <li>
        <label>Equipment</label>
        <input type="number" placeholder="₹" id="equipment-cost">
      </li>
      <li>
        <label>Miscellaneous</label>
        <input type="number" placeholder="₹" id="misc-cost">
      </li>
    </ul>
  </div>

  <!-- Box 3: Investment Tracking -->
  <div class="box" id="investment-box">
    <h3>Investment Tracking</h3>

    <label>Initial Payment (INR):</label>
    <input type="number" id="initial-payment" placeholder="₹">

    <label>Tax Amount (INR):</label>
    <input type="number" id="tax-amount" placeholder="₹">

    <label>Upload Utility Certificate:</label>
    <input type="file" id="utility-certificate" accept=".pdf,.jpg,.png">

    <label>Upload Initial Report:</label>
    <input type="file" id="initial-report" accept=".pdf,.docx">

    <ul id="investment-list" class="investment-list">
      <li class="investment-block">
        <label>1st Investment (INR):</label>
        <input type="number" placeholder="₹">
        <label>Upload Utility:</label>
        <input type="file" accept=".pdf,.jpg,.png">
        <label>Upload Progress Report:</label>
        <input type="file" accept=".pdf,.docx">
      </li>
      <li class="investment-block">
        <label>2nd Investment (INR):</label>
        <input type="number" placeholder="₹">
        <label>Upload Utility:</label>
        <input type="file" accept=".pdf,.jpg,.png">
        <label>Upload Progress Report:</label>
        <input type="file" accept=".pdf,.docx">
      </li>
      <li class="investment-block">
        <label>3rd Investment (INR):</label>
        <input type="number" placeholder="₹">
        <label>Upload Utility:</label>
        <input type="file" accept=".pdf,.jpg,.png">
        <label>Upload Progress Report:</label>
        <input type="file" accept=".pdf,.docx">
      </li>
    </ul>

    <button id="add-investment">Add More Investment</button>
    <button id="save-costs">Save</button>
  </div>
</section>



      <!-- Section 4 -->
      <section id="section-4" class="section">
        <h2>Preclosure & Closure Info</h2>
        <label>Preclosure Notes: <textarea></textarea></label>
        <label>Closure Date: <input type="date"></label>
        <label>Final Remarks: <textarea></textarea></label>
      </section>
    </main>
  </div>

  <div id="footer-container"></div>

  <script>
    function showSection(id) {
  const sections = document.querySelectorAll('.section');
  const tabs = document.querySelectorAll('.sidebar li');

  sections.forEach((section, idx) => {
    section.classList.remove('active');
    tabs[idx].classList.remove('active');
    if (idx === id - 1) {
      section.classList.add('active');
      tabs[idx].classList.add('active');
    }
  });
}

  function toggleEdit(show) {
    document.getElementById('projectView').style.display = show ? 'none' : 'block';
    document.getElementById('projectEdit').style.display = show ? 'block' : 'none';
  }

  function saveProject() {
    document.getElementById('viewName').textContent = document.getElementById('editName').value;
    document.getElementById('viewID').textContent = document.getElementById('editID').value;
    document.getElementById('viewClient').textContent = document.getElementById('editClient').value;
    document.getElementById('viewStart').textContent = document.getElementById('editStart').value;
    document.getElementById('viewEnd').textContent = document.getElementById('editEnd').value;
    document.getElementById('viewDuration').textContent = document.getElementById('editDuration').value;
    document.getElementById('viewStatus').textContent = document.getElementById('editStatus').value;
    document.getElementById('viewManager').textContent = document.getElementById('editManager').value;
    document.getElementById('viewBudget').textContent = document.getElementById('editBudget').value;
    document.getElementById('viewLocation').textContent = document.getElementById('editLocation').value;
    document.getElementById('viewDept').textContent = document.getElementById('editDept').value;
    document.getElementById('viewDesc').textContent = document.getElementById('editDesc').value;

    toggleEdit(false);
  }

function downloadPDF() {
    const element = document.getElementById('section-1');
    html2pdf().from(element).save('ProjectDetails.pdf');
  }

function handleFileUpload(type) {
  const fileInput = document.getElementById(type + 'Upload');
  const file = fileInput?.files[0];

  const previewId = type.includes('Revised') ? type + 'Preview' : type + 'Preview';
  const previewDiv = document.getElementById(previewId);

  const isInitial = !type.includes('Revised');
  const revisedContainer = document.getElementById('revised' + (type.includes('ppt') ? 'Ppt' : 'Mom') + 'UploadContainer');

  if (file) {
    const fileName = file.name;
    const ext = fileName.split('.').pop().toLowerCase();
    let icon = '<i class="fas fa-file"></i>';
    if (ext === 'pdf') icon = '<i class="fas fa-file-pdf"></i>';
    else if (ext === 'doc' || ext === 'docx') icon = '<i class="fas fa-file-word"></i>';
    else if (ext === 'ppt' || ext === 'pptx') icon = '<i class="fas fa-file-powerpoint"></i>';

    previewDiv.innerHTML = `${icon} <span>${fileName}</span>`;

    if (isInitial && revisedContainer) {
      revisedContainer.style.display = 'block';
    }
  } else {
    previewDiv.innerHTML = '';
    if (isInitial && revisedContainer) {
      revisedContainer.style.display = 'none';
    }
  }
}

const fileHistory = {
    ppt: [],
    mom: []
  };

  function submitFile(type) {
    const input = document.getElementById(`${type}Input`);
    const file = input.files[0];
    if (!file) return;

    const now = new Date();
    const timestamp = now.toLocaleString();
    const fileName = file.name;

    // Save to history
    fileHistory[type].unshift({ name: fileName, time: timestamp });

    // Display latest
    const display = document.getElementById(`${type}Display`);
    display.innerHTML = `
      <div class="submitted-file">
        <span><strong>${fileName}</strong> uploaded on ${timestamp}</span>
        <button onclick="editFile('${type}')" class="edit-btn">Edit</button>
      </div>
    `;

    // Update history
    updateHistory(type);

    // Reset file input and hide it
    input.style.display = "none";
    input.value = "";
    input.nextElementSibling.style.display = "none"; // hide submit button
  }

  function editFile(type) {
    const input = document.getElementById(`${type}Input`);
    const display = document.getElementById(`${type}Display`);
    input.style.display = "inline";
    input.nextElementSibling.style.display = "inline";
    display.innerHTML = "";
  }

  function updateHistory(type) {
    const historyContainer = document.getElementById(`${type}History`);
    const history = fileHistory[type];

    if (history.length > 1) {
      let html = `<p><strong>Previous Uploads:</strong></p>`;
      for (let i = 1; i < history.length; i++) {
        html += `<div class="history-item">- ${history[i].name} (uploaded on ${history[i].time})</div>`;
      }
      historyContainer.innerHTML = html;
    } else {
      historyContainer.innerHTML = "";
    }
  }

   // Function to load content from HTML files (navbar.html, footer.html)
    function loadContent() {
      // Fetch the navbar.html and footer.html files
      fetch('components/navbar.html')
        .then(response => response.text())
        .then(data => {
          // Insert navbar HTML content into the placeholder
          document.getElementById('navbar-container').innerHTML = data;
        })
        .catch(error => console.error('Error loading navbar:', error));

      fetch('components/footer.html')
        .then(response => response.text())
        .then(data => {
          // Insert footer HTML content into the placeholder
          document.getElementById('footer-container').innerHTML = data;
        })
        .catch(error => console.error('Error loading footer:', error));
    }

    // Call loadContent when the page is fully loaded
    document.addEventListener('DOMContentLoaded', loadContent);

      document.addEventListener("DOMContentLoaded", () => {
    const saveButton = document.getElementById("save-costs");

    saveButton.addEventListener("click", () => {
      const estimatedCost = document.getElementById("estimated-cost").value;
      const personnelCost = document.getElementById("personnel-cost").value;
      const equipmentCost = document.getElementById("equipment-cost").value;
      const miscCost = document.getElementById("misc-cost").value;

      // Prepare cost data
      const costData = {
        estimatedCost: `₹${estimatedCost}`,
        breakdown: {
          personnel: `₹${personnelCost}`,
          equipment: `₹${equipmentCost}`,
          miscellaneous: `₹${miscCost}`
        }
      };

      // Log it to console (you can store or send this data as needed)
      console.log("Cost Data Saved:", costData);

      // Simple feedback
      alert("Cost details saved successfully!");
    });
  });


  let investmentCount = 3;

  document.getElementById("add-investment").addEventListener("click", () => {
    investmentCount++;
    const list = document.getElementById("investment-list");

    const newItem = document.createElement("li");
    newItem.className = "investment-block";
    newItem.innerHTML = `
      <label>${investmentCount}th Investment (INR):</label>
      <input type="number" placeholder="₹">
      <label>Upload Utility:</label>
      <input type="file" accept=".pdf,.jpg,.png">
      <label>Upload Progress Report:</label>
      <input type="file" accept=".pdf,.docx">
    `;

    list.appendChild(newItem);
  });

  document.getElementById("save-costs").addEventListener("click", () => {
    // You can add real validation or data collection here
    alert("Cost and investment details saved successfully!");
  });




  </script>
</body>
</html>
